<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../../dist/css/style.css">
    <link rel="stylesheet" href="./../../dist/css/clientes.css">
    
    <link rel="stylesheet" href="./../../dist/css/modal.css">
    <script src="../js/jquery.js"></script>

    <title>CLIENTES</title>
    <style>
        .close,
        #editEbook-modal-btn-yes {
            cursor: pointer;
        }
            
        #editEbook-modal-btn-yes a {
        display: inline-block;
        width: 100%;
        height: 100%;
        padding-top: 10px;
        }
    </style>
</head>
<body>
    <header>
        <div class="mintel menu">
        
            <button class="menu__btn"  id='menu__xmark'>
                <img src="./../img/xmark-solid 1.png" alt="Xmark solid 1">
            </button>

            <button class="menu__btn" id="menu__burger" >
                <img src="./../img/bars-solid 1.png" alt="bar solid">
            </button>

            <h1 class="mintel-title">CLIENTES</h1>
        </div>
    
        <nav class="menu__nav">
            <ul class="nav__grid-container">
    
                <li class="grid-item">
                    <a href="./home.html">Home</a>
                </li>
                <li class="grid-item">
                    <a href="./newsletter.html">Newsletter</a>
                </li>
                <li class="grid-item">
                    <a href="./ebooks.html">Ebooks</a>
                </li>
                <li class="grid-item">
                    <a href="./clientes.html">Clientes</a>
                </li>
                <li class="grid-item">
                    <a href="">Cursos</a>
                </li>
                <li class="grid-item">
                    <a href="">Produtos</a>
                </li>
    
                <li class="grid-item">
                    <a href="">SMS</a>
                </li>
    
                <li class="grid-item">
                    <a href="">Sair</a>
                </li>
                </ul>
        </nav>
    </header>

    <main class="main close-content height">
     
        <form action="">
            <section class="client-section">
                <button class="client-section-btn ebook-btn modal-send" id="client-btn">
                    ADICIONAR CLIENTE
                </button>
    
            
            </section>
    
            <section class="client-section">
                <input type="text" class="client-name-input" id="client-name" placeholder="Nome" required>
                <input type="datetime" class="client-phone-input" id="client-phone" placeholder="Telefone" required>
                <input type="text" class="client-email-input" id="client-email" placeholder="Email" required>
            </section>
    
    
            <textarea name="text" class="client-textarea" id="client-textarea" cols="30" rows="10"
            placeholder="Nota" required></textarea>
        </form>

        <button id="mmm">click me</button>

        <script>
            $(document).ready(function() {
              $("#mmm").on("click", function() {
                // Extrai os dados do formulário
                var nome = $("#client-nome").val();
                var idade = $("#client-phone").val();
                var cidade = $("#client-email").val();
                var nota = $("#client-textarea").val();
        
                // Cria um objeto com os dados do formulário
                var novosDados = {
                  nome: nome,
                  idade: idade,
                  cidade: cidade
                };
        
                // Faz uma requisição ao servidor para atualizar o arquivo JSON
                $.ajax({
                  url: "../markdown/cliente/verTodos.json", // Caminho do seu arquivo JSON no servidor
                  type: "get",
                  contentType: "application/json",
                  data: JSON.stringify(novosDados),
                  success: function(response) {
                    console.log("Arquivo JSON atualizado com sucesso:", response);
                  },
                  error: function(error) {
                    console.error("Erro ao atualizar o arquivo JSON:", error);
                  }
                });
              });
            });
          </script>

          <script>
            const express = require("express")

            const app = express();

            app.post("/atualizar.json", (req, res) => {
                // Leitura do arquivo JSON existente
                const caminhoArquivo = "../markdown/cliente/verTodos.json";
                const dadosExistente = JSON.parse(fs.readFileSync(caminhoArquivo, "utf-8"));
              
                // Dados do formulário enviados no corpo da requisição
                const novosDados = req.body;
              
                // Atualiza os dados existentes com os novos dados
                Object.assign(dadosExistente, novosDados);
              
                // Escreve os dados atualizados de volta no arquivo JSON
                fs.writeFileSync(caminhoArquivo, JSON.stringify(dadosExistente, null, 2));
              
                // Retorna os dados atualizados como resposta (pode ser útil no lado do cliente)
                res.json(dadosExistente);
              });
              
          </script>

       

    
    <!--first modal-->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <div class="modal-box-content">
                <h3>Adicionar cliente ?</h3>
                
                <section class="modal-box-section" style="flex-direction:row;">
                    <button class="modal-box-section-btn green modal-btn" id="editEbook-modal-btn-yes">
                        <a href="./newsletter-load.html">SIM</a>
                    </button>
        
                    <button class="modal-box-section-btn red modal-btn close" id="editEbook-modal-btn-no">
                       NÃO
                    </button>
        
                   
                </section>
            </div>
        </div>
        </div>
        
    <div id="myOverlay" class="overlay"></div>






    

    </main>

    
</body>
<script src="./../js/menu.js"></script>
<script src="./../js/cliente.js"></script>

</html>